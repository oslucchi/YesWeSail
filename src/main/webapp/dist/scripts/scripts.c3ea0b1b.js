"use strict";angular.module("yeswesailApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","720kb.datepicker"]).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",registerSuccess:"auth-register-success",registerFailed:"auth-register-failed",logoutSuccess:"auth-logout-success",logoutFail:"auth-logout-fail",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",user:"user",admin:"admin",sailor:"sailor"}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/comeFunziona",{templateUrl:"views/comefunziona.html",controller:"ComefunzionaCtrl",controllerAs:"comeFunziona"}).when("/search/:place?/:style?",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"search"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$cookieStore","$http",function(a,b,c){angular.element(".ui.dropdown").dropdown({action:"hide"}),a.globals=b.get("globals")||{},a.globals.currentUser&&(c.defaults.headers.common.Authorization="Basic "+a.globals.currentUser.token)}]),angular.module("yeswesailApp").controller("MainCtrl",["$scope","$http",function(a,b){angular.element(".ui.dropdown").dropdown(),b.get("http://localhost:3000/api/v1/events/places").then(function(b){console.log(b.data.regioni),a.places=b.data.regioni},function(a){}),b.get("http://localhost:3000/api/v1/events/styles").then(function(b){console.log(b.data.styles),a.styles=b.data.styles},function(a){}),b.get("http://localhost:3000/api/v1/events/proposals").then(function(b){a.proposals=b.data},function(a){})}]),angular.module("yeswesailApp").controller("ComefunzionaCtrl",["$scope","$http","$window",function(a,b,c){}]),angular.module("yeswesailApp").controller("SearchCtrl",["$scope","$http","$routeParams",function(a,b,c){angular.element(".ui.dropdown").dropdown(),a.place=c.place,a.style=c.style,a.getResults=function(){b.get("http://localhost:3000/api/v1/search/"+a.place+"/"+a.style).then(function(b){console.log(b.data),a.results=b.data.results},function(a){})},a.getResults()}]),angular.module("yeswesailApp").controller("LoginCtrl",["$scope","$rootScope","AUTH_EVENTS","AuthService","$location",function(a,b,c,d,e){a.credentials={username:"",password:""},a.login=function(f){d.login(f).then(function(d){b.$broadcast(c.loginSuccess),a.setCurrentUser(d),e.path("/#")},function(){b.$broadcast(c.loginFailed)})}}]),angular.module("yeswesailApp").controller("RegisterCtrl",["$scope","$rootScope","AUTH_EVENTS","AuthService",function(a,b,c,d){a.credentials={username:"",password:"",firstName:"",lastName:""},a.register=function(e){d.register(e).then(function(d){b.$broadcast(c.registerSuccess),a.responseMessage=d},function(){b.$broadcast(c.registerFailed)})}}]),angular.module("yeswesailApp").factory("AuthService",["$http","Session",function(a,b){var c={};return c.login=function(c){return a.post("http://localhost:1337/yeswesail.ddns.net:8080/YesWeSail/rest/auth/login",c).then(function(a){var c=JSON.parse(a.data);return b.create(c.token,c.user.idUsers,c.user.roleId),c.user})},c.logout=function(){var c=b.getSessionToken();return a.post("http://localhost:1337/yeswesail.ddns.net:8080/YesWeSail/rest/auth/logout",{token:c}).then(function(a){return b.destroy(),null})},c.register=function(b){return a.post("http://localhost:1337/yeswesail.ddns.net:8080/YesWeSail/rest/auth/register",b).then(function(a){var b=JSON.parse(a.data);return b})},c.isAuthenticated=function(){return!!b.userId},c.isAuthorized=function(a){return angular.isArray(a)||(a=[a]),c.isAuthenticated()&&1!==a.indexOf(b.userRole)},c}]),angular.module("yeswesailApp").service("Session",["$cookieStore","$http","$rootScope",function(a,b,c){this.create=function(d,e,f){this.token=d,this.userId=e,this.userRole=f,c.globals={currentUser:{userId:this.userId,token:this.token}},b.defaults.headers.common.Authorization="Basic "+this.token,a.put("globals",c.globals)},this.destroy=function(){this.token=null,this.userId=null,this.userRole=null,c.globals={},a.remove("globals"),b.defaults.headers.common.Authorization="Basic"},this.getSessionToken=function(){return this.token}}]),angular.module("yeswesailApp").controller("ApplicationCtrl",["$scope","USER_ROLES","AUTH_EVENTS","AuthService","$location","$rootScope","$cookieStore",function(a,b,c,d,e,f,g){f.globals=g.get("globals")||{},a.currentUser=f.globals.currentUser||{},a.userRoles=b,a.isAuthorized=d.isAuthorized,a.isAuthenticated=d.isAuthenticated,a.setCurrentUser=function(b){a.currentUser=b},a.logout=function(){d.logout().then(function(){f.$broadcast(c.logoutSuccess),a.setCurrentUser(null),e.path("/#")},function(){f.$broadcast(c.logoutFail)})}}]),angular.module("yeswesailApp").filter("noemaildomain",function(){return function(a){return a?a.replace(/@.*/g,""):""}}),angular.module("yeswesailApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/comefunziona.html",'<br> <br> <br> <br> <br> <br> <div class="ui container" style="color: #A0A7B4"> <div class="ui segment"> <p style="text-align: left"><strong>Con YesWeSail scopri il piacere di navigare a prezzi mai visti prima.</strong></p> <p style="text-align: left">Cerca su yeswesail.com le proposte di armatori qualificati e charter professionisti, che desiderano condividere la loro passione per il mare. Puoi incontrare persone interessanti, visitare posti esclusivi e vivere i luoghi turistici da un’altra dimensione. E’ semplice:</p> <p><img class="aligncenter wp-image-2074 size-full" src="http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2.jpg" alt="parti-3-mosse-2" width="1109" height="auto" srcset="http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2-300x70.jpg 300w, http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2-768x180.jpg 768w, http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2-1024x240.jpg 1024w, http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2-150x35.jpg 150w, http://www.yeswesail.com/wp-content/uploads/2016/01/parti-3-mosse-2.jpg 1508w" sizes="(max-width: 1508px) 100vw, 1508px"></p> <p style="text-align: left">Vivi l’esperienza con la formula tutto-incluso per non avere sorprese. YesWeSail è la nuova dimensione del turismo in barca che, grazie al sistema di early-booking,&nbsp;<strong>ti fa risparmiare oltre il 50% rispetto al minor prezzo che trovi sul mercato.</strong><br> Scopri quale sarà la tua prossima destinazione!</p> <p style="text-align: center"><strong><a href="http://www.yeswesail.com/guida-community/" target="_blank">Guida</a> </strong>|&nbsp;<b><a href="http://www.yeswesail.com/privacy-policy/" target="_blank">Policy di utilizzo</a>&nbsp;| <a href="http://www.yeswesail.com/policy-utente-cliente/" target="_blank">Policy Utente-Cliente</a> | <a href="http://www.yeswesail.com/policies-yeswesail-utente%C2%AD-organizzatore/" target="_blank">Policy Utente-Organizzatore</a></b></p> </div> </div> <br> <br> <br>'),a.put("views/login.html","<script>$(document)\r\n        .ready(function () {\r\n            $('.ui.form')\r\n                .form({\r\n                    fields: {\r\n                        email: {\r\n                            identifier: 'email',\r\n                            rules: [\r\n                                {\r\n                                    type: 'empty',\r\n                                    prompt: 'Please enter your e-mail'\r\n                },\r\n                                {\r\n                                    type: 'email',\r\n                                    prompt: 'Please enter a valid e-mail'\r\n                }\r\n              ]\r\n                        },\r\n                        password: {\r\n                            identifier: 'password',\r\n                            rules: [\r\n                                {\r\n                                    type: 'empty',\r\n                                    prompt: 'Please enter your password'\r\n                },\r\n                                {\r\n                                    type: 'length[6]',\r\n                                    prompt: 'Your password must be at least 6 characters'\r\n                }\r\n              ]\r\n                        }\r\n                    }\r\n                });\r\n"+'        });</script> <div class="login_container" ng-controller="LoginCtrl"> <div class="ui container"> <div class="ui middle aligned center aligned grid"> <div class="column"> <h2 class="ui white image header"> <img src="images/cropped-cropped-YWS-60x70.1150e0ae.png" class="image"> <div class="content"> Esegui l\'accesso al tuo account </div> </h2> <form ng-submit="login(credentials)" class="ui large form"> <div class="ui stacked segment"> <div class="ui fluid large blue button"><i class="facebook icon"></i>Facebook</div> <div class="ui horizontal divider"></div> <div class="ui fluid large basic button"><i class="google plus icon"></i>Google</div> <div class="ui horizontal divider"> Oppure </div> <div class="field"> <div class="ui left icon input"> <i class="user icon"></i> <input type="text" ng-model="credentials.username" name="email" placeholder="E-mail address"> </div> </div> <div class="field"> <div class="ui left icon input"> <i class="lock icon"></i> <input type="password" ng-model="credentials.password" name="password" placeholder="Password"> </div> </div> <button type="submit" class="ui fluid large blue submit button">Accedi</button> </div> <div class="ui error message"></div> </form> <div class="ui message"> Non hai un account? <a href="#/register">Registrati</a> </div> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="main_search"> <div class="ui container"> <div class="main_search_content"> <h1 class="ui header">LA VELA PER TUTTI</h1> <h2 class="ui header"> Scegli e personalizza la tua esperienza a prezzi mai visti prima.</h2> <div class="ui fluid three item menu"> <div class="ui dropdown item"> Regione <i class="dropdown icon"></i> <div class="menu"> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> </div> </div> <div class="ui dropdown item"> Stile <i class="dropdown icon"></i> <div class="menu"> <a class="item">Electronics</a> </div> </div> <a href="#/search/{{selectedPlace}}/{{selectedStyle}}" class="item">Cerca</a> </div> </div> </div> </div> <div class="featured_content_container"> <div class="featured_content"> <h1>Le migliori proposte</h1> <div class="ui horizontal segments"> <div ng-repeat="proposal in proposals" style="background-image: url({{proposal.imgUrl}}); background-size: cover" class="ui segment"> <div class="proposal_card"> {{proposal.title}} {{proposal.price}}€ {{proposal.description}} {{proposal.start}}-{{proposal.end}} </div> </div> </div> <h1>Esplora</h1> <div class="ui horizontal segments"> <div ng-repeat="proposal in proposals" style="background-image: url({{proposal.imgUrl}}); background-size: cover" class="ui segment"> <div class="proposal_card"> {{proposal.title}} {{proposal.price}}€ {{proposal.description}} {{proposal.start}}-{{proposal.end}} </div> </div> </div> </div> </div> <div class="why_us"> <div class="why_us_left"> <h1>Perchè scegliere YesWeSail</h1> <div class="ui items"> <div class="item"> <div class="image"> <img src="http://www.yeswesail.com/wp-content/uploads/2016/02/miglior-prezzo.png"> </div> <div class="middle aligned content"> <h2 class="header"> Miglior prezzo garantito</h2> <div class="description"> Nasce il primo sistema di early booking per risparmiare sulle vacanze in barca. </div> </div> </div> <div class="item"> <div class="image"> <img src="http://www.yeswesail.com/wp-content/uploads/2016/02/pagamenti-sicuri.png"> </div> <div class="middle aligned content"> <h2 class="header">Pagamenti sicuri</h2> <div class="description"> Il pagamento avviene su canali sicuri e criptati e la quota viene versata allo skipper entro 24 ore dalla partenza. </div> </div> </div> <div class="item"> <div class="image"> <img src="http://www.yeswesail.com/wp-content/uploads/2016/02/servizio-personlizato.png"> </div> <div class="middle aligned content"> <h2 class="header">Servizio completamente personalizzabile</h2> <div class="description"> Possibilità di personalizzare la vacanza con attività turistiche a terra. </div> </div> </div> </div> </div> <div class="why_us_right"> </div> </div>'),a.put("views/register.html","<script>$(document)\r\n    .ready(function() {\r\n      $('.ui.form')\r\n        .form({\r\n          fields: {\r\n            email: {\r\n              identifier  : 'email',\r\n              rules: [\r\n                {\r\n                  type   : 'empty',\r\n                  prompt : 'Please enter your e-mail'\r\n                },\r\n                {\r\n                  type   : 'email',\r\n                  prompt : 'Please enter a valid e-mail'\r\n                }\r\n              ]\r\n            },\r\n            password: {\r\n              identifier  : 'password',\r\n              rules: [\r\n                {\r\n                  type   : 'empty',\r\n                  prompt : 'Please enter your password'\r\n                },\r\n                {\r\n                  type   : 'length[6]',\r\n                  prompt : 'Your password must be at least 6 characters'\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        })\r\n      ;\r\n    })\r\n"+'  ;</script> <div class="register_container" ng-controller="RegisterCtrl"> <div class="ui container"> <div class="ui middle aligned center aligned grid"> <div class="column"> <h2 class="ui white image header"> <img src="images/cropped-cropped-YWS-60x70.1150e0ae.png" class="image"> <div class="content"> Unisciti a noi per navigare {{responseMessage}} </div> </h2> <form ng-submit="register(credentials)" class="ui large form"> <div class="ui stacked segment"> <div class="ui fluid large blue button"><i class="facebook icon"></i>Facebook</div> <div class="ui horizontal divider"></div> <div class="ui fluid large basic button"><i class="google plus icon"></i>Google</div> <div class="ui horizontal divider"> Oppure </div> <div class="field"> <div class="ui left icon input"> <i class="user icon"></i> <input ng-model="credentials.firstName" type="text" name="name" placeholder="Nome"> </div> </div> <div class="field"> <div class="ui left icon input"> <i class="user icon"></i> <input ng-model="credentials.lastName" type="text" name="lastname" placeholder="Cognome"> </div> </div> <div class="field"> <div class="ui left icon input"> <i class="mail icon"></i> <input ng-model="credentials.username" type="text" name="email" placeholder="Indirizzo email"> </div> </div> <div class="field"> <div class="ui left icon input"> <i class="lock icon"></i> <input ng-model="credentials.password" type="password" name="password" placeholder="Password"> </div> </div> <div class="ui fluid large blue submit button">Registrati</div> </div> <div class="ui error message"></div> </form> <div class="ui message"> Sei già membro? <a href="#/login">Accedi</a> </div> </div> </div> </div> </div>'),a.put("views/search.html",'<div class="ui container"> <div class="main_search_content"> <!--<div class="ui menu">\r\n  \r\n            <div class="item">\r\n            <div class="ui action input">\r\n              <input type="text" placeholder="Navigate to...">\r\n                                <select ng-model="style" class="ui compact selection dropdown">\r\n                    <option value="">Stile</option>\r\n                    <option value="pesca">Pesca</option>\r\n                    <option value="relax">Relax</option>\r\n                </select>\r\n              <div ng-click="getResults()" class="ui button">Go</div>\r\n            </div>\r\n          </div> \r\n\r\n\r\n        </div>--> <div class="ui fluid three item menu"> <div class="ui dropdown item"> Regione <i class="dropdown icon"></i> <div class="menu"> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> <a class="item">Electronics</a> </div> </div> <div class="ui dropdown item"> Stile <i class="dropdown icon"></i> <div class="menu"> <a class="item">Electronics</a> </div> </div> <a href="#/search/{{selectedPlace}}/{{selectedStyle}}" class="item">Cerca</a> </div> </div> <div class="ui divider"></div> <div class="ui container"> <div class="ui four stackable cards"> <div ng-repeat="result in results" class="ui card"> <div class="content"> <div class="right floated"><h2>{{result.price}}€</h2></div> <img class="ui avatar image" src="http://www.yeswesail.com/usersultramedia/23/1458057204.jpg"> <a href="#/events/{{result.eventId}}">{{result.title}}</a> </div> <div class="image"> <img ng-src="{{result.url}}"> </div> <div class="content"> <div class="description"> {{result.description}} </div> </div> <div class="content"> <div>{{result.start}} - {{result.end}}</div> </div> <div class="content"> <span class="right floated"> <i class="heart outline like icon"></i> 17 likes </span> <i class="comment icon"></i> 3 comments </div> <div class="extra content"> <div class="ui large transparent left icon input"> <i class="heart outline icon"></i> <input type="text" placeholder="Add Comment..."> </div> </div> </div> </div> </div> </div>')}]);